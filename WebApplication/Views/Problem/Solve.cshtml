<environment include="Development">
    <link rel="stylesheet" href="~/css/solve.css" />
</environment>
<environment exclude="Development">
    <link rel="stylesheet" href="~/css/solve.min.css" asp-append-version="true" />
</environment>

@model WebApplication.Models.Problem
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = Localizer["Solve"];
}

@section Scripts
    {
    <script src="~/js/solve.js"></script>

    <script>
        function bs_input_file() {
            $(".input-file").before(
                function () {
                    if (!$(this).prev().hasClass('input-ghost')) {
                        var element = $("<input type='file' name='file' accept='.cpp' class='input-ghost' style='visibility:hidden; height:0'>");
                        element.attr("name", $(this).attr("name"));
                        element.change(function () {
                            element.next(element).find('input').val((element.val()).split('\\').pop());
                        });
                        $(this).find("button.btn-choose").click(function () {
                            element.click();
                        });
                        $(this).find('input').css("cursor", "pointer");
                        $(this).find('input').mousedown(function () {
                            $(this).parents('.input-file').prev().click();
                            return false;
                        });
                        return element;
                    }
                }
            );
        }
        $(function () {
            bs_input_file();
        });
    </script>
}

<div>
    <h2 id="Title">@Model.ProblemID. @Model.Name</h2>
    <hr />

    <h4>@Html.DisplayNameFor(m => m.Description)</h4>
    <p>@Html.Raw(Model.Description)</p>
    <hr />

    <h4>@Html.DisplayNameFor(m => m.InputDescription)</h4>
    <p>@Html.Raw(Model.InputDescription)</p>
    <hr />

    <h4>@Html.DisplayNameFor(m => m.OutputDescription)</h4>
    <p>@Html.Raw(Model.OutputDescription)</p>
    <hr />

    <h4>@Html.DisplayNameFor(m => m.Examples)</h4>
    @for (int i = 0; i < Model.Examples.Count; i++)
    {
        <partial name="Example" for="Examples[i]" />
    }
    <hr />
</div>

<div>
    <h4>@Localizer["Solution"]</h4>

    <form method="POST" enctype="multipart/form-data" asp-controller="Problem" asp-action="Upload">
        <div class="form-group">
            <input type="hidden" name="id" value=@Model.ProblemID />

            <div class="input-group input-file">
                <span class="input-group-btn">
                    <button class="btn btn-primary btn-choose" type="button">@Localizer["Choose"]</button>
                </span>

                <input type="text" class="form-control" value="@Localizer["Choose a file..."]" />

                <span class="input-group-btn">
                    <button class="btn btn-success" type="submit">@Localizer["Upload"]</button>
                </span>
            </div>
        </div>
    </form>
</div>

<div>
    <a asp-action="List">@Localizer["Back to list"]</a>
</div>